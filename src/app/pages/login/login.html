<div class="h-full flex flex-col bg-linear-to-b from-orange-50 to-white">

  <!-- CONTENIDO PRINCIPAL -->
  <div class="flex-1 overflow-y-auto px-4 pt-6 pb-8">
    <div class="max-w-md mx-auto">
      
      <!-- Logo pequeño -->
      <div class="flex justify-center mb-6">
        <img 
          src="images/logo_iso.png" 
          alt="CafeYa" 
          class="w-16 h-16 rounded-full shadow-md"
        />
      </div>
      
      <!-- Título y descripción -->
      <div class="text-center mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-2">
          ¡Bienvenido!
        </h2>
        <p class="text-gray-600">
          Para tomar tu pedido, necesitamos algunos datos
        </p>
      </div>
      
      <!-- FORMULARIO -->
      <form [formGroup]="formLogin" (ngSubmit)="onLogin()" class="space-y-5">
        
        <!-- Nombre completo -->
        <div>
          <label 
            for="nombre"
            class="block text-sm font-semibold text-gray-700 mb-2"
          >
            Nombre completo
            <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <lucide-icon [img]="User" class="w-5 h-5 text-gray-400" ></lucide-icon>
            </div>
            <input
              formControlName="nombre"
              id="nombre"
              type="text"
              placeholder="Ej: Juan Pérez"
              name="nombre"
              class="
                w-full h-14
                pl-12 pr-4
                text-base
                bg-white
                border-2 border-gray-200
                rounded-xl
                focus:border-orange-500 focus:outline-none
                transition
                placeholder:text-gray-400
              "
            />
          </div>
        </div>
        
        <!-- Email -->
        <div>
          <label 
            for="email"
            class="block text-sm font-semibold text-gray-700 mb-2"
          >
            Email
            <span class="text-xs text-gray-500 font-normal ml-1">(opcional)</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <lucide-icon [img]="Mail" class="w-5 h-5 text-gray-400" ></lucide-icon>
            </div>
            <input
              formControlName="email"
              id="email"
              type="email"
              inputmode="email"
              placeholder="Ej: juan@email.com"
              name="email"
              class="
                w-full h-14
                pl-12 pr-4
                text-base
                bg-white
                border-2 border-gray-200
                rounded-xl
                focus:border-orange-500 focus:outline-none
                transition
                placeholder:text-gray-400
              "
            />
          </div>
        </div>
        
        <!-- Teléfono (opcional) -->
        <div>
          <label 
            for="telefono"
            class="block text-sm font-semibold text-gray-700 mb-2"
          >
            Teléfono
            <span class="text-xs text-gray-500 font-normal ml-1">(opcional)</span>
          </label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
              <lucide-icon [img]="Phone" class="w-5 h-5 text-gray-400" ></lucide-icon>
            </div>
            <input
              formControlName="telefono"
              id="telefono"
              type="tel"
              inputmode="tel"
              placeholder="Ej: +54 381 123-4567"
              name="telefono"
              class="
                w-full h-14
                pl-12 pr-4
                text-base
                bg-white
                border-2 border-gray-200
                rounded-xl
                focus:border-orange-500 focus:outline-none
                transition
                placeholder:text-gray-400
              "
            />
          </div>
          <p class="text-xs text-gray-500 mt-2">
            Te avisaremos cuando tu pedido esté listo
          </p>
        </div>

         <div>
          <label class="block text-sm font-semibold text-gray-700 mb-3">
            ¿Cuánto tiempo pensás quedarte?
            <span class="text-red-500">*</span>
          </label>
          
          <div class="flex items-center justify-between gap-3">
            @for(duracion of duracionOptions; track duracion.value) {
              <button
                type="button"
                (click)="selectDuracion(duracion.value)"
                [class.bg-orange-500]="formLogin.get('duracion_minutos')?.value === duracion.value"
                [class.text-white]="formLogin.get('duracion_minutos')?.value === duracion.value"
                [class.border-orange-500]="formLogin.get('duracion_minutos')?.value === duracion.value"
                [class.bg-white]="formLogin.get('duracion_minutos')?.value !== duracion.value"
                [class.text-orange-500]="formLogin.get('duracion_minutos')?.value !== duracion.value"
                [class.border-orange-200]="formLogin.get('duracion_minutos')?.value !== duracion.value"
                class="
                  flex-1
                  aspect-square
                  max-w-17.5
                  border-2
                  rounded-full
                  flex flex-col items-center justify-center
                  font-bold
                  transition-all
                  active:scale-95
                  shadow-sm
                "
              >
                <span class="text-2xl">{{ duracion.label }}</span>
                <span class="text-xs font-medium mt-0.5">min</span>
              </button>
            }
          </div>

          <p class="text-xs text-gray-500 mt-3 text-center">
            Esto nos ayuda a organizar mejor las mesas
          </p>
        </div>
        
        <!-- Mensaje de error (si existe) -->
         @if (error()){
           <div 
             class="
               p-4
               bg-red-50
               border-l-4 border-red-500
               rounded-lg
               flex items-start gap-3
             "
           >
             <lucide-icon [img]="AlertCircle" class="w-5 h-5 text-red-500 shrink-0 mt-0.5" ></lucide-icon>
             <p class="text-sm text-red-700">
               {{ error() }}
             </p>
           </div>
         }
        
        <!-- Info de privacidad -->
        <div class="
          p-4
          bg-amber-50
          border border-amber-200
          rounded-xl
          flex items-start gap-3
        ">
          <lucide-icon 
            [img]="Lock" 
            class="w-5 h-5 text-amber-600 shrink-0 mt-0.5"
          ></lucide-icon>
          <p class="text-xs text-gray-700 leading-relaxed">
            Usamos tu nombre para identificar tu pedido.  
            El email y el teléfono son opcionales y solo los utilizaremos para enviarte promociones y novedades de la cafetería.  
            Nunca compartimos tu información con terceros.
          </p>
        </div>
        
        <!-- Botón de submit -->
        <button
          type="submit"
          class="
            w-full h-14
            bg-linear-to-r from-orange-500 to-red-500
            text-white text-lg font-bold
            rounded-xl
            shadow-lg shadow-orange-500/30
            disabled:opacity-50 disabled:shadow-none disabled:cursor-not-allowed
            active:scale-95
            transition-all
            flex items-center justify-center gap-2"
          [disabled]="auth.loadingUser()"
        >
          @if(auth.loadingUser()) {
            <div class="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
            <span>Cargando...</span>
          } @else{
            Iniciar Sesión
          }
        </button>
      </form>
      
      <!-- Texto legal pequeño -->
      <p class="text-xs text-center text-gray-500 mt-6 px-4">
        Al continuar, aceptás nuestros 
        <a routerLink="/legal" class="text-orange-600 underline">Términos y Condiciones</a> 
        y 
        <a routerLink="/legal" class="text-orange-600 underline">Política de Privacidad</a>
      </p>
      
    </div>
  </div>
</div>